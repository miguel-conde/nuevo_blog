<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.542">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Miguel Conde">
<meta name="dcterms.date" content="2024-09-23">

<title>nuevo_blog - Productividad y satisfacción laboral en la Economía del Conocimiento</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">nuevo_blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Productividad y satisfacción laboral en la Economía del Conocimiento</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">data</div>
                <div class="quarto-category">management</div>
                <div class="quarto-category">deep work</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Miguel Conde </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 23, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#una-empresa-data-driven" id="toc-una-empresa-data-driven" class="nav-link active" data-scroll-target="#una-empresa-data-driven">Una Empresa <em>data driven</em></a></li>
  <li><a href="#el-caballo-de-troya" id="toc-el-caballo-de-troya" class="nav-link" data-scroll-target="#el-caballo-de-troya">El caballo de troya</a></li>
  <li><a href="#cuál-es-la-moraleja" id="toc-cuál-es-la-moraleja" class="nav-link" data-scroll-target="#cuál-es-la-moraleja">¿Cuál es la moraleja?</a></li>
  <li><a href="#y-esto-a-qué-viene" id="toc-y-esto-a-qué-viene" class="nav-link" data-scroll-target="#y-esto-a-qué-viene">Y esto ¿a qué viene?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>El 28 de junio de este año Nike presentó sus resultados financieros del 2º trimestre. Ese mismo día, sus acciones en bolsa cayeron un 20%: perdieron <span class="math inline">\(25000\)</span> millones de dólares en un solo día.</p>
<p>Con eso acumulaban en 9 meses la friolera de <span class="math inline">\(70000\)</span> millones de dólares de capital volatilizados y conseguían el dudoso honor de alcanzar el mínimo en bolsa desde 2018, <span class="math inline">\(-32\)</span>% desde principio de año.</p>
<p>En Nike lo llaman “El Día del Juicio”.</p>
<p>¿Qué había pasado?</p>
<section id="una-empresa-data-driven" class="level1">
<h1>Una Empresa <em>data driven</em></h1>
<p>Desde enero de 2020 Nike tenía un nuevo equipo directivo que diseñó tres grandes líneas estratégicas:</p>
<ol type="1">
<li><p>Sustituir las <strong>categorías</strong> por <strong>géneros</strong> . Las categorías eran divisiones específicas de productos deportivos, como <em>running</em>, baloncesto, fútbol o <em>fitness</em>, cada una con producto, estrategias de marketing, innovación, desarrollo de productos y ventas centradas en cada deporte o segmento. Las divisiones basadas en géneros (hombre, mujer, niño) son las típicas en empresas retail de moda, como Zara o H&amp;M.</p></li>
<li><p>Convertirse en una empresa de <strong>venta directa</strong> al consumidor, eliminando intermediarios como distribuidores o minoristas. Esto significaba romper miles de acuerdos y potenciar su propia plataforma de venta online, hasta entonces el canal de ventas secundario.</p></li>
</ol>
<p>Con estas dos medidas se perseguía claramente una <strong>reducción de costes</strong>, simplificando procesos, centralizando stocks y eliminando comisiones.</p>
<p>Para implementaralas Nike debía apoyarse en la tercera medida:</p>
<ol start="3" type="1">
<li><p>Convertirse en una <strong>empresa <em>data driven</em></strong>:</p>
<ul>
<li><p>Cambiar a un modelo de <strong>marketing digital</strong>. El modelo anterior de marketing de Nike se centraba en la creación de demanda a través de la <strong>marca</strong>, los productos y el liderazgo en el mercado. Invertían fuertemente en <strong>marketing deportivo</strong>, <strong>narrativas</strong> <strong>inspiradoras</strong> y <strong>campañas creativas</strong> que destacaban la sinergia entre atletas y productos. Este enfoque estaba orientado a la innovación, la inspiración y la conexión emocional con los consumidores. El objetivo era hacer crecer la marca mediante la inspiración de más personas para practicar deporte, manteniendo a los atletas como el núcleo de sus campañas.</p></li>
<li><p>Utilizar los datos para <strong>optimizar procesos</strong> (por ejemplo, la <strong>gestión de stocks</strong>). Nike utilizaba un enfoque más tradicional basado en previsiones históricas y relaciones con intermediarios para la gestión de su inventario. Los minoristas hacían pedidos con antelación basados en estimaciones de ventas futuras, lo que se conocía como el sistema de “futuros”. Esto permitía a Nike planificar su producción y distribución a largo plazo, pero no respondía tan rápidamente a cambios inmediatos en la demanda o preferencias del consumidor. El <strong>conocimiento experto</strong> de los empleados de Nike jugaba un papel crucial en el modelo anterior, ya que estos profesionales tenían un entendimiento profundo de cada categoría deportiva.</p></li>
</ul></li>
</ol>
<p>Parece una estrategia correcta ¿verdad? Pero condujo a una catástrofe. ¿Dónde está el error?</p>
</section>
<section id="el-caballo-de-troya" class="level1">
<h1>El caballo de troya</h1>
<p>Deshacerse de los procesos y el marketing tradicionales tiene una ventaja: no necesitas el conocimiento experto de cientos de directivos intermedios que los gestionaban de una manera, digamos, más “arte” que “ciencia”. Puedes sustituir este conocimiento experto por lo que te dicen los datos y los modelos. Mucho más objetivo. Mucho más eficiente. Mucho más “científico”.</p>
<p>Pero esta ventaja es, en realidad, un caballo de troya. Al ser todo digital, tienes acceso a los datos. Pero estos datos <strong>no son los de tu negocio del futuro</strong>. Son los de tu negocio del <strong>pasado</strong>.</p>
<ul>
<li><p>Un pasado en el que tus clientes compraban tus productos en tiendas y centros comerciales. Y resulta que quieres usar estos datos con clientes que, en teoría, comprarán tus productos online.</p></li>
<li><p>Un pasado en el que tus clientes reconocían tu marca y tenían una conexión emocional con ella. Pero ahora quieres usar esos datos con clientes a los que tus mensajes les llegarán a través de “fríos” ads online.</p></li>
</ul>
<p>Efectivamente, Nike perdió muchos de sus antiguos clientes. Estos iban a una tienda, no encontraban productos Nike y, en vez de ir a Nike.com a comprarlos, compraban los de la competencia que <em>si</em> estaban en la tienda y aprovechaban para ocupar el hueco dejado por Nike.</p>
<p>Si, Nike obtuvo nuevos clientes <em>online</em>. Pero de estos nuevos clientes no tenía datos. Y lo que es peor: tampoco de sus clientes <em>potenciales</em>.</p>
<p>De modo que ni los modelos de marketing digital ni los de gestión de inventario funcionaron nunca bien.</p>
<p>Estos modelos, por muy sofisticados que sean, no saben <em>extrapolar</em>. Solo <em>interpolan</em>.</p>
</section>
<section id="cuál-es-la-moraleja" class="level1">
<h1>¿Cuál es la moraleja?</h1>
<p>Hay formas más baratas de hacer las cosas, si. Pero puede que no sean las más eficaces.</p>
<p>Nike invirtió grandes sumas de dinero en marketing digital y programático porque era más fácil de medir, aunque no necesariamente más efectivo. La empresa priorizó lo que podía medirse fácilmente en lugar de enfocarse en aquello que producía mejores resultados a largo plazo, como las campañas de marca más creativas y emocionalmente conectadas con los consumidores o las relaciones sólidas y mutuamente beneficiosas con distribuidores. Esto condujo a un desperdicio de recursos y a una pérdida de la esencia de su estrategia de marca.</p>
<p>Pero, un momento. ¿No se atribuye a Peter Drucker la frase “If you can’t measure it, you can’t manage it.”? Y, si lo dijo Drucker…</p>
<p>En una empresa, todo lo relevante al negocio y su gestión ¿se <strong><em>puede</em></strong> medir? ¿se <strong><em>sabe</em></strong> medir? ¿se <strong><em>quiere</em></strong> medir? ¿se <strong><em>debe</em></strong> medir? ¿<strong><em>merece la pena</em></strong> medirlo?</p>
</section>
<section id="y-esto-a-qué-viene" class="level1">
<h1>Y esto ¿a qué viene?</h1>
<p>Tienes razón: este artículo se titula “Productividad y satisfacción laboral en la Economía del Conocimiento”. Y aquí estoy hablando de Nike y de sus problemas con el marketing digital.</p>
<p>Te contaré lo que sucedió: cuando leí <a href="https://www.linkedin.com/pulse/nike-epic-saga-value-destruction-massimo-giunco-llplf/">Nike: An Epic Saga of Value Destruction</a> este verano, poco después de que ocurrieran los hechos, yo estaba releyendo <a href="https://www.amazon.es/s?k=C%C3%A9ntrate+%28Deep+Work%29&amp;i=digital-text&amp;__mk_es_ES=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;crid=3MQNAM3K7ZUR5&amp;sprefix=c%C3%A9ntrate+deep+work+%2Cdigital-text%2C121&amp;ref=nb_sb_noss_2">“Céntrate (Deep Work)”</a> de Cal Newport. Lo había recomendado Kiko Llaneras en Linkedin (<a href="https://www.linkedin.com/pulse/qu%C3%A9-leer-un-mont%C3%B3n-libros-sobre-tecnolog%C3%ADa-y-kiko-llaneras/?trackingId=sbAE83gwQnSL%2F%2F1yhb80ug%3D%3D">¿Qué leer? Un montón libros sobre tecnología y alrededores</a>) y tenía pendiente releerlo.</p>
<p>Este libro si que trata de, entre otras cosas, productividad y satisfacción laboral (¡y personal!).</p>
<p>El caso es que leyendo y releyendo respectivamente ambos, se “cruzaron” algunas ideas de los dos.</p>
<p>El epicentro del cruce era la moraleja que nos ha enseñado “El Día del Juicio” de Nike: puede que lo más eficiente no sea implementar lo que es más fácil de medir. Y eso plantea reflexiones sobre la gestión de la productividad y la satisfacción personal y laboral, especialmente en los trabajos intensivos en conocimiento, que cada vez son más. Y lo hace desde el ámbito individual hasta el organizacional.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>